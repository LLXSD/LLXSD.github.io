<!DOCTYPE html>

<html class="theme-next mist use-motion" lang="zh-CN">

<!-- body -->
<head><meta name="generator" content="Hexo 3.8.0">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


<link rel="stylesheet" href="/assets/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">
<link rel="stylesheet" href="/assets/css/main-post.css?v=7.0.0">
<link rel="mask-icon" href="/images/logo.svg?v=7.0.0" color="#222">

<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>

<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

<!-- title -->
<title> Starlink专利阅读-1</title>
  
  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>
</head>

<!-- body -->

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

<!-- 可能是显示相关设置 -->
<div class="container sidebar-position-left page-post-detail">
<div class="headband"></div>
<header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="header-inner"><div class="site-brand-wrapper">
    <div class="site-meta">
    <div class="custom-logo-site-title">
        <a href="/" class="brand" rel="start">
            <span class="logo-line-before"><i></i></span>
            <span class="site-title">Lixin's Blog</span>
            <span class="logo-line-after"><i></i></span>
        </a>
    </div>
    </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<!-- 导航栏 -->
<nav class="site-nav">
    <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">
            <a href="/blogs/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
        </li>
        
        <li class="menu-item menu-item-tags">
            <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
        </li>
        
        <li class="menu-item menu-item-categories">
            <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>
        </li>
        
        <!-- <li class="menu-item menu-item-archives">
            <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
        </li> -->

        <!-- <li class="menu-item menu-item-search">
            <a href="javascript:;" class="popup-trigger">
                <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li> -->
    </ul>

<!-- <div class="site-search">   
    <div class="popup search-popup local-search-popup">
        <div class="local-search-header clearfix">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
            <div class="local-search-input-wrapper">
                <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
            </div>
        </div>
        <div id="local-search-result"></div>
    </div>
</div>   -->

</nav>

</div>
</header>
<!-- 导航栏结束 -->
    
<main id="main" class="main">
<div class="main-inner">
<div class="content-wrap">
    <div id="content" class="content">
    <div id="posts" class="posts-expand">
    <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/03/Bioinfo-ML-Club-7th/">
    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lixin's Blog">
    </span>

<!-- 页面内标题 -->
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline"> Starlink专利阅读-1</h1>
        <div class="post-meta">
            <span class="post-time">
                <span class="post-meta-item-icon">
                    <i class="fa fa-calendar-o"></i>
                </span>
                <span class="post-meta-item-text">发表于</span>
                <time itemprop="dateCreated datePublished">2023-08-31</time>
            </span>
            <span class="post-category">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                    <i class="fa fa-folder-o"></i>
                </span>
                <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Notes/" itemprop="url" rel="index"><span itemprop="name">Notes</span></a></span>
            </span>
        </div>
    </header>
    
<div class="post-body" itemprop="articleBody">
<!-- 文章内容开始 -->
<h1>US11540301 MAC scheduler</h1>
<p>专利提出了a new MAC scheduler，包括uplink scheduler和downlink scheduler，分别配有grant allocation algorithm。</p>
<blockquote>
<p>An uplink scheduler can generate an uplink map that defines, for a group of user terminals on earth, which portions of an uplink radio frame can be used to transmit data to the satellite.
A downlink scheduler that is used to generate a downlink map that defines portions of a downlink radio frame that are allocated to individual user terminals.
User terminals can be defined by geographic cells or sectors.
The scheduler provides a &quot;grant&quot; of radio resources in th uplink radio frame for each user terminal.</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/185236ee60ea47a6bde75def55ee89ff.png" alt="在这里插入图片描述" />
专利披露存在a link adapatation algorithm which dynamically adjusts the modulation and coding scheme (MCS) for the uplink and the downlink.
UT半双工工作模式，卫星是全双工工作模式。</p>
<p><img src="https://img-blog.csdnimg.cn/84cce9c3e65f4d4b9fc5d5fd333265f6.png" alt="Fig 4" />
从上图来看，LMAC和RLC都上星了，encoder/decoder也都在卫星上。
<img src="https://img-blog.csdnimg.cn/5d0227a543ba42b094f080f3350be33b.png" alt="在这里插入图片描述" />
RLC的模式在AM mode和UM mode之间变化，其中AM mode指的是可靠模式，RLC提供全功能处理，由于有重传，效率最低。UM mode指的是不可靠模式，RLC不做重传ARQ处理。
RLC sublayer从MAC scheduler处获得对每个SID/SFID的授权。MAC scheduler通过授权，为UT分配无线资源。
RLC子层接收SID/SFID对，并将其映射到RLC流，从MAC调度程序获得授权，并生成一个RLC PDU(未显示)，其中包含RLC头和所需的 SDU，根据需要进行分片以完成授权。</p>
<h1>US 11729684 Handover</h1>
<p>专利中提到handover发生有两种可能，主要原因是out of coverage area，所以猜测Starlink是<strong>reactive handover</strong>，但是后文还列举了许多其他原因，handover的触发有多种情况。</p>
<ul>
<li>当卫星移动导致设备不在卫星的覆盖范围时；</li>
<li>当移动终端移动导致超出卫星/基站的覆盖范围时；</li>
</ul>
<p>专利提到现有wireless handover technologies often experience perceptible latencies and loss or interruption of service, have limited scalability, flexibility and efficiency.
<img src="https://img-blog.csdnimg.cn/e75ccde3c57240b790045cbdbe0201ea.png" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/c0c3eed2925e471b820fe66ad4c0a080.png" alt="" />
专利中明确提出在卫星和卫星之间、卫星和地面站之间、卫星和用户之间存在RF link，用于通信。
<img src="https://img-blog.csdnimg.cn/fab69c63638d4a41853722a29d1a6889.png" alt="在这里插入图片描述" />
<img src="https://img-blog.csdnimg.cn/c3970762d7154a17908791851dc4e9fa.png" alt="在这里插入图片描述" />
专利中提到SAG配备了repeater，用于relay卫星间的流量，所以猜测本文提到的星间RF link并没有使用，通信还是依赖于地面的。</p>
<h3>RDS</h3>
<p>在专利中，提到RDS(维护网络拓扑并生成schedule)定义的schedule的内容：</p>
<ul>
<li>which entity should communicate with what other entities. 还可以定义相关的time slots和radio frames；</li>
<li>which SAT, AG, UT, and/or PoP site should be included in, or part of a communication session between UT and SAT；</li>
<li>a handover or handover period, 包括UT在SAT之间的切换，也包括SAG/PoP的切换；</li>
</ul>
<p>此外，专利提到RDS会提前生成schedule并分发给设备。RDS生成schedule时会考虑如下因素：</p>
<ul>
<li>ephemeris data of satellite (velocity, position)</li>
<li>location information of UT, SAG, PoP</li>
<li>information about asset availability at one or more times</li>
<li>current topology</li>
<li>current communication sessions/links</li>
<li>network conditions (latency, bandwidth, traffic loads, resource failures)</li>
<li>QoS requirements associated with one or more devices</li>
<li>others (traffic/session/link related)</li>
</ul>
<p>专利中提到the particular SAT and SAG can be selected based on <strong>signal strength</strong>, <strong>line-of-sight</strong>, and the like.
回程可以用相同的SAT/SAG，也可以用不同的，此外，专利提到卫星和卫星之间、卫星和地面站之间、卫星和用户之间的链路可以采用OFDMA模式。为了计算高效，也支持FFT和inverse FFT。
<img src="https://img-blog.csdnimg.cn/dabaf89a4b1a4eecb6dbb64f416d1c18.png" alt="在这里插入图片描述" /></p>
<h3>encrypted traffic</h3>
<p><img src="https://img-blog.csdnimg.cn/1312543a625e48a2bf3add7b1361897d.png" alt="在这里插入图片描述" />
专利中提出在User Terminal和PoP之间做加密信道，其中User Terminal指的应该是Starlink Router。
<img src="https://img-blog.csdnimg.cn/2f6612f696864811a244598565148989.png" alt="在这里插入图片描述" /></p>
<h3>L3 address</h3>
<p><img src="https://img-blog.csdnimg.cn/6e311be2700c46db9128d86dcb103222.png" alt="在这里插入图片描述" />
专利中明确提到，为了在上述virtual link中路由数据包，每个component会被分配routing identifier/address，明确提到IP地址。这些identifier/address可以被用来执行路由决策、路由/转发数据包、计算路径/开销、监测拓扑和网络条件等。</p>
<h3>handover signal procedure</h3>
<p><img src="https://img-blog.csdnimg.cn/1dc366a550534af3864860f05e9db9f1.png" alt="Fig 2" />
从图中来看，RDS负责生成schedule，卫星收到schedules后本地保存一份，并告知UT，UT可以周期性地向RDS请求schedules。
通常在出现以下情况时，会触发handover：</p>
<ol>
<li>a satellite moves outside of a range of the user terminal/cell</li>
<li>experience signal, connectivity, performace issue</li>
<li>topology changes</li>
<li>load balancing rules/conditions</li>
<li>resource optimization efforts</li>
</ol>
<p>从上述原因来看，可能会由于其他原因触发handover，不一定是reactive模式。
专利中对于handover过程丢包的讨论：
<img src="https://img-blog.csdnimg.cn/e749b071de3941b9a45fcdb3eb58aeaa.png" alt="在这里插入图片描述" />
过程描述：</p>
<ol>
<li>UE根据schedule，发起handover request，这个request可以被UT的L2 (UMAC)处理。
相似地，卫星也可以生成handover request，由卫星的L2处理 (<strong>UMAC确定上星</strong>)；
UE生成的request中包含<strong>new session identifier (SID)</strong>, <strong>a time/time slot for the handover</strong>, <strong>an identication</strong> that the UT is requesting a handover.
<img src="https://img-blog.csdnimg.cn/f2904daa60fb4c03835af61e52997775.png" alt="在这里插入图片描述" />
卫星生成的request中包括<strong>new cell identifier</strong>, <strong>a group of SIDs</strong> corresponding to flows/UTs associated with a cell corresponding to the new cell identifier, <strong>a time/time slot for a given beam from the SAT</strong>, <strong>an indication</strong> of the handover.</li>
<li>UT初始化Rx/Tx takedown过程，以断开L2的Rx和Tx connections/interfaces；UT可发起Rx/Tx beam pointing service (BPS) down command，关闭Rx/Tx beam-pointing operation，卫星进行同样的操作；</li>
<li>在经过上述takedown操作后，UT和旧卫星的communication link断开；</li>
<li>UT通过bring up Rx/Tx, BPS进行handover的准备；</li>
<li>UE和新的卫星之间建立communication link。
<img src="https://img-blog.csdnimg.cn/4dfae7887ae144cfbf840cc9a3f54ce1.png" alt="Fig3A" />
上图为UT内部的信令流程，与前面的介绍基本一致。
其中，L1 Rx/Tx down command和Rx/Tx BPS down command可以包括<strong>timing information</strong>，后者还可以包括<strong>an indication of a new beam pointing direction/angle</strong> for the new communication link。</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/d41a8f45eee540acbfcf40799418b80e.png" alt="Fig3B" />
专利提到在handover发生前，可以通过routing table update消息更新卫星的路由表/L3地址，修改与UT和SAT相关的表项。
猜测这里的路由表就是为了转发。</p>
<p><img src="https://img-blog.csdnimg.cn/26291d4fe35c46159fdd29dd1ee96d0b.png" alt="在这里插入图片描述" /></p>
<h3>切换场景</h3>
<ol>
<li>
<p>不同卫星的不同beam间切换：
<img src="https://img-blog.csdnimg.cn/ce73e75a0d58419fb020807f344f71ba.png" alt="在这里插入图片描述" />
为了执行切换，建立了从PoP到new SAT 的新路径。
专利提到，为了避免丢包，数据包会同时利用两条path双播，且卫星会在handover完成之前缓存数据包。
bicasted packet中包括<strong>an indication</strong>，以标识数据包在handover过程中是否被丢弃。比如，L3 can perform 1-bit flipping in the SID of the packet, MAC sub layer can check for 1-bit flipping to determine whether to buffer any packets targeting the cell after/before the handover. L3 can include/maintain old and new routing tables before and after the handover.</p>
</li>
<li>
<p>相同卫星的不同beam间切换：
<img src="https://img-blog.csdnimg.cn/f21d6c75c9154b4aa93a2b01d3e090e7.png" alt="Fig 5" /></p>
</li>
<li>
<p>不同卫星的不同beam间切换(未切换SAG)：
<img src="https://img-blog.csdnimg.cn/ed2628e8bd9d4a718dfd35d014786f32.png" alt="在这里插入图片描述" />
上图所示切换过程使用了TDM (Time-driven multiplexing)，此时一颗卫星可以服务多个小区，发生在一个/多个小区发生切换时。</p>
</li>
</ol>
<blockquote>
<p>TDM is a method or technique used to transmit and receive independent signals over a common signal path or beam where each signal appears on the signal path or bema within a sub-interval of time in an alternating pattern. Thus, TDM <strong>allows multiple signals to be transmitted over a common channel</strong>.
The time domain can be diveded into several <strong>recurrent time slots</strong>, with a time slot for each sub-channel.
Each radio burst in a TDM radio frame can have a respective synchronization signal.
In some cases, a TDM radio frame can include an error correction channel before synchronization. After the last sub-channel, error correction, and synchronization, the cycle canrestart with a new radio frame as previously described.</p>
</blockquote>
<ol start="4">
<li>不同卫星的不同beam间切换：
<img src="https://img-blog.csdnimg.cn/f68808073f3748668f023155a8ce982d.png" alt="在这里插入图片描述" /></li>
<li>相同卫星的不同beam间切换：
<img src="https://img-blog.csdnimg.cn/21d62e3dbe914a2faf64821ebc821fc4.png" alt="在这里插入图片描述" />
后两种跟前三种的区别是，后两种是由UT触发的，流程基本一致。</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/5970868bb03a48ba997c375a73236b76.png" alt="在这里插入图片描述" />
如上图所示，专利中提到low latency handover。</p>
<h1>US 2023/0164089 A1 computing resource</h1>
<p>这篇专利主要讲如何支持星上计算，卫星上配备相关的计算、存储、访问控制环境，用于支持不同应用。特别提到可以利用卫星间星间链路提供low latency content delivery。
<img src="https://img-blog.csdnimg.cn/2269ac5ec33143b8b776eb36c24bcff7.png" alt="在这里插入图片描述" />
专利中提到了用户计费，不要求用户需要绑定到具体的UT，account data应当是独立于具体的UT和gateway的。
这暗含了decoupling，在共享场景下，用户也不应该绑定到具体的地面站，然而核心网分布是固定的，如果依赖地面核心网，是否意味着绑定到某个地面站？</p>
<blockquote>
<p>The computing environment may <strong>authenticate</strong> the user and transmit <strong>a user-specific interface</strong> to its computing/data resources.
In other cases, the user interface may not be altered or needed from a traditional user interface in that the location of the data or the application on the satellite or group of satellites will be <strong>transparent</strong> to the user.</p>
</blockquote>
<p>专利中提到存在backup satellite，且多个backup satellite之间进行负载均衡。</p>
<blockquote>
<p>a satellite includes a satellite control system, an antenna connected to the satellite control system, a solar panel, a battery and a power converter configured between the solar panel and the battery to manage a flow of electricity.</p>
</blockquote>
<p>也提到了当卫星上不止一种计算环境时的情况：
<img src="https://img-blog.csdnimg.cn/751728e70ee5468fa3536d04c6bebf10.png" alt="在这里插入图片描述" /></p>
<h2>系统元素</h2>
<p><img src="https://img-blog.csdnimg.cn/7d0d6ffdf66f4c599a6582dc324d1a8a.png" alt="Fig 1B" />
专利中提到上述元素之间可以通过mesh network通信，且由于卫星移动节点的配置动态改变（特别提到卫星和卫星之间可以通信）。图中存在3种链路：</p>
<ul>
<li>UT-SAT: Ku-band radio frequency link (phased array antenna).</li>
<li>SAT-GW: Ka-band radio frequency link (parabolic anntenna).</li>
<li>SAT-SAT: laser-based link (multiple).
<img src="https://img-blog.csdnimg.cn/b08261905c1b451ca45f13523def7649.png" alt="在这里插入图片描述" />
为了做路由，专利提到需要知道UT上空有多少颗可见卫星，以及对应的data link、traffic等信息。面向星上计算的路由计算不止考虑可达性，还考虑性能需求。
<img src="https://img-blog.csdnimg.cn/4f1c95e9fadb4c0cb91b46fd0a2a1bb4.png" alt="在这里插入图片描述" /></li>
</ul>
<h2>小区映射</h2>
<blockquote>
<p>The ground area includes user terminals grouped into service cells.
专利中以hexagonally shaped area表示，同时也提到支持各种形状的area.</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/892b701b65a84be9ae4ff0dda0f07d75.png" alt="在这里插入图片描述" />
专利中提到topology service模块为每个service cell分配一个卫星 (slot-by-slot, the slot length is between 10 and 20 seconds)，存在service cell和卫星之间的一一映射。从下图看，一颗卫星可以服务多个cell，每个cell可以映射到一颗卫星。
<img src="https://img-blog.csdnimg.cn/e9441b87ab754cc78014f338eaafcca6.png" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/6a4c6bbeac694f8b99520f7d8640ac74.png" alt="Fig 4" />
<img src="https://img-blog.csdnimg.cn/8b49f6f7cbb046c89a3f81e6889b1a5a.png" alt="在这里插入图片描述" />
schedule应该提前分发给卫星和UT，专利中提到可提前5-10分钟分发。提前的时间是控制消息开销和实时性的tradeoff。
卫星上也有schedule，指示跟哪个GW连接。
<img src="https://img-blog.csdnimg.cn/8d4a835ca6214a2a9789e8c569786d3d.png" alt="在这里插入图片描述" />
根据专利中的描述，UT可收到一份带有优先级的卫星列表，每个service cell的优先级有所不同，猜测是为了负载均衡。
UT会按照优先级发起接入请求，当优先级高的卫星无法接入时，再请求接入列表内其他卫星。
UT也可获得一份没有优先级的列表，此时UT可以根据自己的选择确定顺序。
为每个service cell提供多颗候选卫星，可以提高鲁棒性，当因为遮挡等因素，UT无法接入某颗卫星时，可以快速切换到其他卫星。
[映射到同一service cell的卫星的channel必须不同，否则会发生干扰。]
问题在于，<strong>schedule中提供了一个卫星列表，如何得知UT具体接入的是哪颗卫星呢？</strong></p>
<p>从专利的描述来看，SAT-GW链路也是由topology schedule控制，卫星选择地站，而非地站选择卫星。
<img src="https://img-blog.csdnimg.cn/2c60bd90c26b4555bee3825886d64307.png" alt="在这里插入图片描述" /></p>
<p><img src="https://img-blog.csdnimg.cn/ebd2779356aa4c1b8d5b132aab02fa7b.png" alt="Fig 6" />
<img src="https://img-blog.csdnimg.cn/5567faa20af041ccafeec74ab3f36fce.png" alt="Fig 7A" />
<img src="https://img-blog.csdnimg.cn/9bb8391c71d04a109fda4e379dac8ca0.png" alt="Fig 7B" /></p>



<!-- 文章内容最后 -->
</div>

<footer class="post-footer">
    <!-- 标签信息 -->
    <div class="post-tags">
        <!-- <a href="/tags/Mobile Network" rel="tag"># Mobile Network</a> -->
    </div>
    <!-- 文章信息 -->
    <div class="post-nav">
        <!-- 上一篇 -->
        <div class="post-nav-next post-nav-item">
            <!-- <a href="/blogs/paper/2023/12/19/hotnets23.html" rel="next" title="HotNets'23和HotMobile'23论文总结">
                <i class="fa fa-chevron-left"></i> HotNets'23和HotMobile'23论文总结
            </a> -->
        </div>
        <!-- 下一篇 -->
        <span class="post-nav-divider"></span>
        <div class="post-nav-prev post-nav-item">
            <a href="/blogs/3gpp/2023/11/17/" rel="next" title="TS 38.201">
                <i class="fa fa-chevron-left"></i> TS 38.201 标准阅读
            </a>
        </div>
    </div>
</footer>

</div>
</article>

</div>
</div>
<!-- github comments -->
    <!-- <div class="comments" id="comments">
        <div id="gitment-container"></div>
    </div> -->
    
</div>
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>


 <!-- 右侧边栏开始 --> 
<aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

 <!-- 右侧边栏内容 -->    
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li>
          <!-- <li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li> -->
        </ul>
      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            <!-- 目录 -->
            <div class="post-toc-content">
                <ol class="nav">
                    <li class="nav-item nav-level-1">
                        <a class="nav-link" href="#macscheduler">
                            <span class="nav-text">MAC Scheduler</span>
                        </a>
                    </li>
                    
                    <li class="nav-item nav-level-1">
                        <a class="nav-link" href="#handover">
                            <span class="nav-text">Handover</span>
                        </a>
                    </li>

                    <li class="nav-item nav-level-1">
                        <a class="nav-link" href="#resource">
                            <span class="nav-text">Computing</span>
                        </a>
                    </li>
                </ol>
            </div>
          </div>
        </div>
      <!--/noindex-->

<!-- 右侧边栏结束 --> 
    </div>
</aside>


        
      </div>
    </main>

<!-- 页面最下方的描述 -->

<!-- <footer id="footer" class="footer">
    <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
        <span class="with-love" id="animate">
            <i class="fa fa-user"></i>
        </span>
        <span class="author" itemprop="copyrightHolder">Lianm</span>
        </div>
        <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>
        <span class="post-meta-divider">|</span>
        <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.0.0</div>
    </div>
</footer> -->

<!-- 返回顶部 -->
<div class="back-to-top">
    <i class="fa fa-arrow-up"></i>        
</div>
      
</div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>



  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/assets/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/assets/lib/jquery/index.js?v=2.1.3"></script>
  <script src="/assets/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/assets/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  <script src="/assets/lib/three/three.min.js"></script>
  <script src="/assets/lib/three/three-waves.min.js"></script>
  <script src="/assets/js/src/utils.js?v=7.0.0"></script>
  <script src="/assets/js/src/motion.js?v=7.0.0"></script>
  <script src="/assets/js/src/schemes/muse.js?v=7.0.0"></script>
  <script src="/assets/js/src/scrollspy.js?v=7.0.0"></script>
  <script src="/assets/js/src/post-details.js?v=7.0.0"></script>
  <script src="/assets/js/src/bootstrap.js?v=7.0.0"></script>


    <!-- LOCAL: You can save these files to your site and update links -->

  
  <script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.css">
<!-- END LOCAL -->

<!-- github comment -->
<!-- <style>
#gitment-container a {
  border-bottom: none;
}

</style>

<script>
  function renderGitment() {
    var gitment = new Gitment({
      id: window.location.pathname,
      owner: 'Ming-Lian',
      repo: 'Gitment-repo',
      
      oauth: {
      
      
        client_secret: '3dc34ff32bbb0ee876b487f13a800b08857e0a10',
      
        client_id: '0e14870b1fb232903713'
      }
    });
    gitment.render('gitment-container');
  }

  
    renderGitment();
  
</script> -->

  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>


  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js'; 
      }
      else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>

</body>
</html>
